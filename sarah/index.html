<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Statistics Calculator</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			margin: 20px;
		}

		* {
			padding: 5px;
		}

		.result {
			margin-top: 20px;
			padding: 10px;
			width: 80%;
			min-height: 100px;
			border: 1px solid #ccc;
			border-radius: 5px;
			background-color: #f9f9f9;
		}

		input {
			width: 80%;
		}
	</style>
</head>

<body>

	<div id="calculator">
		<input id="inputNumbers" placeholder="Enter numbers" /><br><br>
		<button id="evaluateButton">Evaluate</button>
		<div id="result" class="result"></div>
	</div>

	<script>
		function calculateStatistics(values) {
			const mean = values.reduce((sum, value) => sum + value, 0) / values.length;

			const sortedValues = [...values].sort((a, b) => a - b);
			console.log(sortedValues);
			let spannweite = sortedValues[sortedValues.length - 1] - sortedValues[0];
			const mid = Math.floor(sortedValues.length / 2);
			const median = sortedValues.length % 2 === 0 ?
				(sortedValues[mid - 1] + sortedValues[mid]) / 2 :
				sortedValues[mid];

			const frequencyMap = {};
			let maxFreq = 0;
			let mode = [];

			values.forEach(value => {
				frequencyMap[value] = (frequencyMap[value] || 0) + 1;
				if (frequencyMap[value] > maxFreq) {
					maxFreq = frequencyMap[value];
					mode = [value];
				} else if (frequencyMap[value] === maxFreq) {
					mode.push(value);
				}
			});
			mode = [...new Set(mode)];

			const variance = values.reduce((sum, value) => sum + Math.pow(value - mean, 2), 0) / values.length;
			const standardDeviation = Math.sqrt(variance);

			return {
				spannweite,
				mean: mean,
				median: median,
				mode: mode,
				variance: variance,
				standardDeviation: standardDeviation
			};
		}
		function replaceCommasWithDots(inputString) {
			return inputString.replace(/,/g, '.');
		}
		function formatFloatToDecimal(num,n=3) {
			// Convert the number to a float and limit to 4 decimal places
			return parseFloat(num.toFixed(n));
		}

		document.getElementById('evaluateButton').addEventListener('click', () => {
			let input = document.getElementById('inputNumbers').value;
			input = replaceCommasWithDots(input);
			let values = input.split(' ').map(num => parseFloat(num.trim())).filter(num => !isNaN(num));
			values.sort();
			console.log(values)

			if (values.length === 0) {
				document.getElementById('result').innerHTML = "Please enter valid numbers.";
				return;
			}

			const stats = calculateStatistics(values);
			document.getElementById('result').innerHTML = `
            <strong>Results:</strong><br>
            Spannweite: ${formatFloatToDecimal(stats.spannweite,4)}<br>
            Mean: ${stats.mean}<br>
            Median: ${stats.median}<br>
            Mode: ${stats.mode}<br>
            Variance: ${stats.variance}<br>
            Standard Deviation: ${stats.standardDeviation}
        `;
		});
	</script>

</body>

</html>